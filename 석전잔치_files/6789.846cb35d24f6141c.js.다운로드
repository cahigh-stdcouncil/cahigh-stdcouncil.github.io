"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6789,1321,2922],{2797:function(e,i,t){t.r(i),t.d(i,{CollectionViewBlock:function(){return CollectionViewBlock}});var n=t(67294),l=t(12625),o=t(42451),d=t(20575),a=t(70917),c=t(24435),r=t(49861),s=t(44411),u=t(44858),p=t(77456),h=t(66087),v=t(47981),x=t(66782),g=t(42503),m=t(95669),f=t(37475),w=t(96341),y=t(36849),k=t(905),C=t(61579),b=t(6038),Z=t(96486),M=t.n(Z),_=t(32338),V=t(14032),R=t(35944),L={table:h.Z,list:p.Z,gallery:u.Z,board:r.Z,calendar:s.Z,timeline:v.Z,page:n.Fragment},W={name:"1j65ypj",styles:"padding-left:1px;padding-right:1px;@media (max-width: 1140px){padding-bottom:0px;padding-left:1px;padding-right:1px;}@media (max-width: 480px){padding-bottom:15px;padding-left:1px;padding-right:1px;}"},B={name:"11vqqno",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;font-size:22px"},F={name:"7nhawb",styles:"width:20px;height:100%;display:block;fill:inherit;flex-shrink:0;backface-visibility:hidden"},S={name:"hifgeb",styles:"width:20px;margin-right:4px"},q={name:"1p8ki3q",styles:"width:100%;padding-left:4px;padding-right:4px;display:flex;align-items:center;border-radius:3px"},z={name:"1l1zvm2",styles:"display:block;color:inherit;text-decoration:none;width:max-content;max-width:100%;margin-right:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},E={name:"j0vbgw",styles:"display:flex;align-items:center;padding-top:8px;padding-left:1px;padding-right:1px"},I={name:"17cyrun",styles:"flex-grow:1;flex-shrink:0;display:flex;flex-direction:column"},H={name:"75sk10",styles:"flex-shrink:0;z-index:1;overflow:visible;padding-left:1px;padding-right:1px"},N={name:"1nke4xr",styles:"padding-left:96px;padding-right:96px;@media (max-width: 480px){padding-left:24px;padding-right:24px;}"},CollectionViewBlock=function(e){var i,t,r,s,u,p=e.block,h=e.style,v=e.isFirst,b=e.isLast,Z=e.isDirectChild,T=e.pageFullWidth,j=(0,C.Z)().select,D=(0,n.useRef)(null),P=(0,k.m)(),Q=(0,n.useContext)(w.p),X=Q.recordMap,$=Q.mergeRecordMap,A=Q.fetchRecord,G=(0,n.useContext)(f.W).values,O=(0,n.useContext)(m.v).api,U=(0,n.useState)(null===(i=p.value.view_ids)||void 0===i?void 0:i[0]),Y=U[0],J=U[1],K=(0,n.useMemo)(function(){return Y?A({id:Y,table:"collection_view"}):null},[A,Y]),ee=(0,n.useMemo)(function(){var e,i,t,n,l;return(null==K?void 0:null===(e=K.value)||void 0===e?void 0:null===(i=e.format)||void 0===i?void 0:null===(t=i.collection_pointer)||void 0===t?void 0:t.id)||(null===(n=p.value.format)||void 0===n?void 0:null===(l=n.collection_pointer)||void 0===l?void 0:l.id)||p.value.collection_id},[p,K]),ei=(0,n.useMemo)(function(){return ee?A({id:ee,table:"collection"}):null},[A,ee]),et=(0,n.useMemo)(function(){return Y?G[Y]:null},[G,Y]),en=(0,n.useMemo)(function(){var e,i;return null!==(e=null===(i=D.current)||void 0===i?void 0:i.search)&&void 0!==e?e:M().identity},[D.current]),el=(0,y.V)(en),eo=el.searchQuery,ed=el.searching,ea=el.setSearching,ec=el.searchFetching,er=el.onTextChange,es=el.reset,eu=(0,n.useMemo)(function(){var e;return p.value.id!==(null==ei?void 0:null===(e=ei.value)||void 0===e?void 0:e.parent_id)},[p,ei]),ep=(0,n.useMemo)(function(){return(0,V.t)(K)?L[K.value.type]:null},[K,L]),eh=(0,n.useMemo)(function(){var e;return null==ei?void 0:null===(e=ei.value)||void 0===e?void 0:e.icon},[ei]);(0,n.useEffect)(function(){var e,i,t=null!==(e=null===(i=p.value.view_ids)||void 0===i?void 0:i.filter(function(e){return!X.collection_view[e]}).map(function(e){return{pointer:{id:e,table:"collection_view"},version:-1}}))&&void 0!==e?e:[];t.length>0&&O.newSyncRecordValues({requests:t}).then(function(e){$(e.recordMap)})},[]);var ev=(0,n.useMemo)(function(){return T?N:(0,a.css)("padding-left:calc((100% - var(--content-max-width)) / 2);padding-right:calc((100% - var(--content-max-width)) / 2);@media (max-width: ",P.pageMaxWidth+"px","){padding-left:96px;padding-right:96px;}@media (max-width: 480px){padding-left:24px;padding-right:24px;}","")},[P.pageMaxWidth,T]),ex=(0,n.useMemo)(function(){return(0,d.$)(P.pageMaxWidth)},[P.pageMaxWidth]);return(0,V.t)(ei)&&(0,V.t)(K)&&Y?(0,R.BX)("div",{"data-block-id":p.value.id,className:"notion-".concat(p.value.type,"-block"),css:(0,a.css)("width:",Z?"100vw":"100%",";max-width:",Z?"100vw":"100%",";margin-top:",v?"2px":"1px",";margin-bottom:",b?"0px":"1px",";",""),style:h,children:[(0,R.tZ)(RunHook,{collection:ei,collectionView:K,queryCollectionResult:et}),(0,R.tZ)(l.E,{css:Z?(0,a.css)("min-height:40px;flex-shrink:0;z-index:85;",ev,";",""):H,block:p,isDirectChild:Z,collectionViews:(0,_.S)(null!==(t=null===(r=p.value.view_ids)||void 0===r?void 0:r.map(function(e){return X.collection_view[e]}))&&void 0!==t?t:[]),focusedCollectionView:K,onCollectionViewClick:function(e){es(),J(e.value.id)},searchQuery:eo,searching:ed,setSearching:ea,searchFetching:ec,onTextChange:er,reset:es}),(0,R.tZ)("div",{css:I,children:(0,R.BX)("div",{style:{position:"relative"},children:[(null===(s=K.value.format)||void 0===s?void 0:s.hide_linked_collection_name)!==!0&&(0,R.tZ)("div",{css:Z?(0,a.css)("display:flex;align-items:center;padding-top:8px;padding-left:1px;padding-right:1px;",ev,";",""):E,children:(0,R.tZ)(c.S,{href:P.hidePageLinkIndicator?void 0:"/".concat(ei.value.parent_id||p.value.id),css:z,children:(0,R.BX)("div",{role:P.hidePageLinkIndicator?void 0:"button",css:q,children:[eu&&!P.hidePageLinkIndicator&&(0,R.tZ)("div",{css:S,children:(0,R.tZ)("svg",{viewBox:"0 0 16 16",css:F,children:(0,R.tZ)("path",{d:"M13.1475 10.5869V3.72363C13.1475 3.25195 12.833 2.93066 12.3477 2.93066H5.48438C5.02637 2.93066 4.70508 3.27246 4.70508 3.67578C4.70508 4.07227 5.05371 4.40039 5.46387 4.40039H7.89746L10.8438 4.30469L9.59961 5.39844L3.08496 11.9199C2.92773 12.0771 2.8457 12.2686 2.8457 12.46C2.8457 12.8564 3.20801 13.2256 3.61816 13.2256C3.80957 13.2256 3.99414 13.1504 4.15137 12.9932L10.6729 6.47168L11.7803 5.22754L11.6641 8.05762V10.6074C11.6641 11.0176 11.9922 11.373 12.4023 11.373C12.8057 11.373 13.1475 11.0312 13.1475 10.5869Z"})})}),ei&&ei.value&&eh?(0,R.tZ)("div",{style:{position:"relative",marginRight:6},children:(0,R.tZ)(x.A,{pageIcon:eh,collectionId:ei.value.id,width:24,height:24})}):null,(0,R.tZ)("div",{contentEditable:!1,spellCheck:!0,placeholder:j({en:"Untitled",ko:"제목없음"}),"data-root":!0,css:B,children:(0,R.tZ)(g.O,{title:null==ei?void 0:null===(u=ei.value)||void 0===u?void 0:u.name})})]})})}),(0,R.tZ)(R.HY,{children:"timeline"===K.value.type?et&&(0,R.tZ)(ep,{ref:D,block:p,collection:ei,collectionView:K,isDirectChild:Z,pageFullWidth:T,search:er}):(0,R.tZ)("div",{className:"notion-scroller horizontal",style:{flexGrow:1,flexShrink:0,zIndex:1,overflow:"auto hidden",marginRight:"0px",marginBottom:"0px"},children:(0,R.tZ)("div",{css:(0,a.css)(T?ex.page[K.value.type]:ex.block[K.value.type]," ",Z?null:W,";",""),className:"notion-".concat(K.value.type,"-view"),children:"page"===K.value.type?(0,R.tZ)(o.$,{collectionView:K}):et&&(0,R.tZ)(ep,{ref:D,block:p,collection:ei,collectionView:K,isDirectChild:Z,pageFullWidth:T,minWidth:(0,a.css)("min-width:",T?"calc(100% - 192px)":"var(--content-max-width)",";@media (max-width: 480px){min-width:calc(100% - 48px);}",""),search:er})})})})]})})]}):null},RunHook=function(e){var i=e.collection,t=e.collectionView,l=e.queryCollectionResult,o=(0,b.j)(),d=(0,k.m)(),a=(0,n.useContext)(w.p).recordMap,c=(0,n.useContext)(f.W).setQueryCollectionResult;return(0,n.useEffect)(function(){l||o.firstQueryCollectionPerType({collection:i,collectionView:t,recordMap:a,userTimeZone:d.userTimeZone}).then(function(e){e&&c(t.value.id,e,i.value.id)})},[!!l]),null};i.default=CollectionViewBlock}}]);